{
    admin off
    log {
        level debug
        output stdout
        format json
    }
}

:8080 {
    route {
        caddy_mib {
            error_codes 404
            max_error_count 100
            ban_duration 1m
            ban_duration_multiplier 2
            whitelist 192.168.1.10 10.0.0.0/24 2001:db8::1
            custom_response_header "Powered by Caddy MIB"
        }
        file_server {
            root /Users/fab/caddy-mib
        }
    }
    # This log block is for the file_server, you can adjust it as needed.
    # The caddy_mib logs will be integrated with the global log settings.
}
